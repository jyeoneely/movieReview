{% extends 'base.html' %}
{% load static %}

{% block main %}
<div class="row container my-3">
    <img class="img-corny" src="{% static 'assets/img/community_corn.png' %}" alt="..." />
    <div class="card">
        <div class="card-body">
            <h2 class="card-title">{{ board.title }}</h2>
            <p class="card-text"><small>작성자 : {{ board.writer }}</small></p>
            <p class="card-text"><small>글머리 : {{ board.content_type }}</small></p>
            <p class="card-text">{{ board.content }}</p>
            <p class="card-text"><small class="text-muted">작성일 : {{ board.created_date | date:"Y-m-d h:i" }}</small></p>
            <p class="card-text"><small class="text-muted">조회수 : {{ board.board_hit }}</small></p>
            {% if board.file_image %}
            첨부파일
            <a href = "{{board.file_image.url}}" download>
            <img src= "{{ board.file_image.url }}" height="100"></a>
            {% endif %}
        </div>
    </div>

    <div class="row mt-3 col">
        <span class="col">
            <a class="btn btn-primary" href="/community" role="button">목록</a>
            <a class="btn btn-info" href="/community/modify/{{ board.id }}" role="button">수정</a>
            <button class="btn btn-primary" id="open">삭제</button>
        </span>

        <div class="modal hidden">
            <div class="modal__overlay"></div>
            <div class="modal__content">
                <h5>삭제된 게시글은 복구가 불가능합니다.<br/>게시글을 삭제하시겠습니까?</h5>
                <button id="delete" onclick="deleteHandler()">삭제</button>
                <button id="close">취소</button>
            </div>
        </div>
    </div>

    <div class="card">
        <table>
            <tr align="center">
                <td>이전글 : </td>
                <td>
                    {% if board_before %}
                    <a href="{% url 'community:detail' board_before.id %}">{{board_before.title}}</a>
                    {% else%}
                    이전글이 없습니다.
                    {% endif %}
                </td>
            </tr>
            <tr align="center">
                <td>다음글 : </td>
                <td>
                    {% if board_after %}
                    <a href="{% url 'community:detail' board_after.id %}">{{board_after.title}}</a>
                    {% else%}
                    다음글이 없습니다.
                    {% endif %}
                </td>
            </tr>


        </table>
    </div>
</div>

<style>
    button {
      all: unset;
      background-color: #f5bc10;
      color: white;
      padding: 5px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 20px;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .modal__overlay {
      background-color: rgba(0, 0, 0, 0.6);
      width: 100%;
      height: 100%;
      position: absolute;
    }
    .modal__content {
      width: 25%;
      background-color: white;
      text-align: center;
      padding: 50px 70px;
      position: relative;
      border-radius: 10px;
      top: 0px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
    }
    h5 {
      margin-bottom: 20px;
    }
    .hidden {
      display: none;
    }

</style>
<!-- modal button -->

<script>
    const openBtn = document.getElementById('open');
    const closeBtn = document.getElementById('close');
    const modal = document.querySelector('.modal');
    const overlay = document.querySelector('.modal__overlay');
    const openModal = () => {
      modal.classList.remove('hidden');
    }
    const closeModal = () => {
      modal.classList.add('hidden');
    }
    openBtn.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);

    function deleteHandler() {
        location.replace("{% url 'community:delete' board.id  %}");
    }

</script>


{% endblock %}