{% extends 'base.html' %}
{% load static %}
{% block bootstrap %}
<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}"/> {% endblock %}


{% block main %}
<header>
    <div class="navbar navbar-dark bg-dark shadow-sm mb-3">
        <div class="container d-flex justify-content-between">
            <a href="{% url 'community:index' %}" class="navbar-brand d-flex align-items-center">
                <strong>게시판</strong>
            </a>
        </div>
    </div>
</header>
<div class="container">
    <div class="card">
        <div class="card-body">
            <h2 class="card-title">{{ board.title }}</h2>
            <p class="card-text">작성자 : {{ board.writer }}</p>
            <p class="card-text">글머리 : {{ board.content_type }}</p>
            <p class="card-text"><small class="text-muted">작성일 : {{ board.created_date | date:"Y-m-d h:i" }}</small></p>
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            <p class="card-text">{{ board.content }}</p>
        </div>
    </div>
    <div>
        <table>

            <tr>
                <td>이전글 :</td>
                <td>
                    {% if board_before %}
                    <a href="/community/detail/{{board_before.id}}">{{board_before.title}}</a>
                    {% else%}
                    이전글이 없습니다.
                    {% endif %}
                </td>
            </tr>


            <tr>
                <td>다음글 :</td>
                <td>
                    {% if board_after %}
                    <a href="/community/detail/{{board_after.id}}">{{board_after.title}}</a>
                    {% else%}
                    다음글이 없습니다.
                    {% endif %}
                </td>
            </tr>


        </table>
    </div>
    <div class="row mt-3 col">
        <div class="form-row float-left"></div>
        <div class="col">
            <a class="btn btn-info" href="/community" role="button">목록</a>
        </div>

        <div>
            <a class="btn btn-info" href="/community/modify/{{ board.id }}" role="button">수정</a>
        </div>
        <!--        <div class="col-auto">-->
        <!--            <a href="/community/delete/{{ board.id }}">-->
        <!--            <button id="delete-btn" type="submit" class="btn btn-danger">삭제</button>-->
        <!--            </a>-->
        <!--        </div>-->
        <!-- --------------------삭제 경고창을 위한 모달 구현 영역-------------------- -->
        <!-- modal style -->
        <!--        <div class="p-2 bd-highlight">-->
        <style>
                    button {
                      all: unset;
                      background-color: steelblue;
                      color: white;
                      padding: 5px 20px;
                      border-radius: 5px;
                      cursor: pointer;
                      font-size: 20px;
                    }
                    .modal {
                      position: fixed;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                      display: flex;
                      justify-content: center;
                      align-items: center;
                    }
                    .modal__overlay {
                      background-color: rgba(0, 0, 0, 0.6);
                      width: 100%;
                      height: 100%;
                      position: absolute;
                    }
                    .modal__content {
                      width: 25%;
                      background-color:white;
                      text-align: center;
                      padding: 50px 70px;
                      position: relative;
                      border-radius: 10px;
                      top: 0px;
                      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
                    }
                    h5 {
                      margin-bottom: 20px;
                    }
                    .hidden {
                      display: none;
                    }

        </style>
        <!-- modal button -->

        <button class="btn btn-primary" id="open">삭제</button>

        <div class="modal hidden">
            <div class="modal__overlay"></div>
            <div class="modal__content">
                <h5>삭제된 게시글은 복구가 불가능합니다.<br/>게시글을 삭제하시겠습니까?</h5>
                <button id="delete" onclick="deleteHandler()">삭제</button>
                <button id="close">취소</button>

            </div>
        </div>

        <script>
                const openBtn = document.getElementById('open');
                const closeBtn = document.getElementById('close');
                const modal = document.querySelector('.modal');
                const overlay = document.querySelector('.modal__overlay');
                const openModal = () => {
                  modal.classList.remove('hidden');
                }
                const closeModal = () => {
                  modal.classList.add('hidden');
                }
                openBtn.addEventListener('click', openModal);
                closeBtn.addEventListener('click', closeModal);
                overlay.addEventListener('click', closeModal);

                function deleteHandler() {
                    location.replace("{% url 'community:delete' board.id  %}");
                }

        </script>

    </div>


</div>
{% endblock %}